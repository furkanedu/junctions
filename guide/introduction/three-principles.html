<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Haiku Of Routing Principles - junctions.js</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <meta property="og:site_name" content="Junctions.js" />
  <meta property="og:type" content="article" />
  <meta name="twitter:card" content="summary" />

  
    <meta name="description" content="Junctions.js is a routing library for React that is designed around a haiku." />
    <meta property="og:description" content="Junctions.js is a routing library for React that is designed around a haiku." />
    <meta name="twitter:description" content="Junctions.js is a routing library for React that is designed around a haiku." />
  
  
    <meta property="og:title" content="The Haiku Of Routing Principles" />
    <meta name="twitter:title" content="The Haiku Of Routing Principles" />
  
  
    <meta property="og:image" content="https://junctions.js.org/logo.png?1" />
    <meta name="twitter:image" content="https://junctions.js.org/logo.png?1" />
  
  

  
    <link rel="stylesheet" type="text/css" href="/site-bundle.f5f606b3.css">
  
</head>
<body>
  <div id="app">
    <div class="RootWrapper" data-reactroot="" data-reactid="1" data-react-checksum="1688293523"><div class="RootWrapper-header" data-reactid="2"><div class="RootWrapper-header-inner" data-reactid="3"><a href="/" class="RootWrapper-junctions" data-reactid="4"><div class="RootWrapper-junctions-logo" data-reactid="5"></div><!-- react-text: 6 -->Junctions<!-- /react-text --></a><a class="RootWrapper-github" href="https://github.com/jamesknelson/junctions" data-reactid="7">GitHub</a><div class="RootWrapper-links" data-reactid="8"><a href="/guide" class="RootWrapper-link RootWrapper-link-active" data-reactid="9">Guide</a><a href="/examples" class="RootWrapper-link " data-reactid="10">Examples</a><a href="/api" class="RootWrapper-link " data-reactid="11">API Reference</a></div></div></div><div class="RootWrapper-body" data-reactid="12"><div data-reactid="13"><div class="MenuWrapper" data-reactid="14"><div class="
            MenuWrapper-sidebar
            MenuWrapper-closed
          " data-reactid="15"><a class="MenuWrapper-active" href="/guide/introduction/three-principles" data-reactid="16">The Haiku Of Routing Principles</a><ul class="MenuWrapper-menu" data-reactid="17"><li class="MenuWrapper-heading" data-reactid="18"><a href="/guide" class="MenuWrapper-link  MenuWrapper-link-primary" data-reactid="19">Tutorial</a></li><li class="MenuWrapper-section" data-reactid="20"><div data-reactid="21">Introduction</div><ul class="MenuWrapper-submenu" data-reactid="22"><li data-reactid="23"><a href="/guide/introduction/do-i-need-a-router" class="MenuWrapper-link  " data-reactid="24">Do I Need A Router?</a></li><li data-reactid="25"><a href="/guide/introduction/motivation" class="MenuWrapper-link  " data-reactid="26">Motivation</a></li><li data-reactid="27"><a href="/guide/introduction/three-principles" class="MenuWrapper-link MenuWrapper-link-active " data-reactid="28">The Haiku Of Routing Principles</a></li><li data-reactid="29"><a href="/guide/introduction/what-you-get-from-junctions" class="MenuWrapper-link  " data-reactid="30">What You Get From Junctions</a></li></ul></li><li class="MenuWrapper-section" data-reactid="31"><div data-reactid="32">Basics</div><ul class="MenuWrapper-submenu" data-reactid="33"><li data-reactid="34"><a href="/guide/basics/locations" class="MenuWrapper-link  " data-reactid="35">Locations</a></li><li data-reactid="36"><a href="/guide/basics/routes" class="MenuWrapper-link  " data-reactid="37">Routes</a></li><li data-reactid="38"><a href="/guide/basics/junctions" class="MenuWrapper-link  " data-reactid="39">Junctions</a></li><li data-reactid="40"><a href="/guide/basics/converting-locations-to-routes" class="MenuWrapper-link  " data-reactid="41">Converting Locations to Routes</a></li><li data-reactid="42"><a href="/guide/basics/the-screen-pattern" class="MenuWrapper-link  " data-reactid="43">The Screen Pattern</a></li><li data-reactid="44"><a href="/guide/basics/links" class="MenuWrapper-link  " data-reactid="45">Links</a></li><li data-reactid="46"><a href="/guide/basics/example-contact-list" class="MenuWrapper-link  " data-reactid="47">Example: Contact List</a></li></ul></li><li class="MenuWrapper-section" data-reactid="48"><div data-reactid="49">Advanced</div><ul class="MenuWrapper-submenu" data-reactid="50"><li data-reactid="51"><a href="/guide/advanced/contextual-links" class="MenuWrapper-link  " data-reactid="52">Pass history via context</a></li><li data-reactid="53"><a href="/guide/advanced/canonical-locations" class="MenuWrapper-link  " data-reactid="54">Canonical Location</a></li></ul></li><li class="MenuWrapper-heading" data-reactid="55"><a href="/guide/Glossary" class="MenuWrapper-link  MenuWrapper-link-primary" data-reactid="56">Glossary</a></li></ul><div class="MenuWrapper-arrows" data-reactid="57"><a class="MenuWrapper-arrows-prev" href="/guide/introduction/motivation" data-reactid="58">Motivation</a><a class="MenuWrapper-arrows-next" href="/guide/introduction/what-you-get-from-junctions" data-reactid="59">What You Get From Junctions</a></div></div><div class="MenuWrapper-body" data-reactid="60"><h1 class="MenuWrapper-title" data-reactid="61">The Haiku Of Routing Principles</h1><div class="MarkdownView" data-reactid="62"><div class="
    CommunicationStateView
    CommunicationStateView-fresh
  " data-reactid="63"></div><markdown data-reactid="64"><p>Junctions was originally designed in response to the requirements of a real production application. And as it turns out, these same requirements can be summarised as a haiku.</p>
<blockquote>
<p>Components compose</p>
</blockquote>
<blockquote>
<p>Browsers show “Back” and “Forward”</p>
</blockquote>
<blockquote>
<p>Get outta’ the way!</p>
</blockquote>
<p>So why exactly are these three principles important enough to warrant a haiku? Let’s take a look at each in turn to find out.</p>
<h2 id="components-compose"><a class="header-anchor" href="#components-compose" aria-hidden="true">#</a> Components Compose</h2>
<p>React is a wonderful tool for making parts of your code reusable, owing in large part to its component system. But perhaps <em>because</em> React makes creating new components so easy, it can also be easy to forget that there are still problems which componentization can’t solve. In particular, components still have access to a shared environment – and they can use that environment in ways that don’t play well with others. Or in mathy jargon, <em>components are not guaranteed to compose</em>.</p>
<p>The goal of Junctions is to allow you to write truly reusable components, and part of that is to be able to compose them whichever way you’d like. <em>But URLs are a shared resource</em>, and <strong>allowing components to take ownership of URLs willy-nilly can lead to chaos</strong>.</p>
<p>To demonstrate, consider an application which renders two components:</p>
<ul>
<li>A set of tabs for the application’s navigation</li>
<li>A modal with the current user’s account details</li>
</ul>
<p><img src="/11722dfd0d09de3a50a506b0bcf75d49.png" alt="Parallel Routes Wireframe"></p>
<p>These components <em>should be</em> completely independent – in fact, the account details modal component could be reused across any number of applications! But because both components have navigation controls, they need to share the same URL space. And this can cause conflicts.</p>
<p>In order to follow the principle that <em>Components Must Compose</em>, components which use Junctions for routing avoid taking ownership of any shared resources. In particular:</p>
<ul>
<li>Components never access routing data through <a href="https://facebook.github.io/react/docs/context.html#why-not-to-use-context">React Context</a></li>
<li>Components don’t choose their own URLs (but can still suggest them)</li>
</ul>
<p>Of course, there is no avoiding the fact that components still need access to shared resources. <strong>The difference with Junctions is that these resources are allocated by your application – not by your components.</strong></p>
<h2 id="browsers-show-back-and-forward"><a class="header-anchor" href="#browsers-show-back-and-forward" aria-hidden="true">#</a> Browsers show “Back” and “Forward”</h2>
<p>If there is one constant over the short history of the web browser, it is that the “Back” and “Forward” buttons have been – and always will be – important.</p>
<p><img src="/1dbb8572c4f6fc4bb3aac655920b5efe.png" alt="Parallel Routes Wireframe"></p>
<center><small>Netscape Navigator 1.22, with "Back" and "Forward"</small></center>
<p>These two simple buttons hold the distinction of being perhaps the most well understood pieces of web UI in existence. They’re incredibly useful, uniquely ubiquitous, and with Javascript, frustratingly easy to break. And with this in mind, properly supporting “Back” and “Forward” was woven into Junctions’ design from the beginning.</p>
<p>But what does this mean for you, as a developer? Well, Junctions avoids introducing any new state to your application. In order to ensure that “Back” and “Forward” work as planned, <strong><em>all</em> navigation state needs to be stored within standard browser APIs</strong>:</p>
<pre><code class="language-js"><span class="token comment" spellcheck="true">// Stores all the information in your browser's address bar</span>
window<span class="token punctuation" >.</span>location

<span class="token comment" spellcheck="true">// A JavaScript object which can be updated with</span>
<span class="token comment" spellcheck="true">// `History.pushState`, allowing arbitrary data to be stored</span>
History<span class="token punctuation" >.</span>state
</code></pre>
<p>With no state to manage, Junctions-based applications are <em>simple</em>. All your routing data is available at the application root, and Routing information is passed to your components the way God and The React Devs intended – via <code>props</code>.</p>
<p>But isn’t this simplicity limiting? Not at all! The thing is that the browser History API isn’t limited to URLs; it also supports <code>state</code> objects. And given your Junctions-based components don’t allocate their own Locations anyway, <strong>navigation will use URLs when possible, and <code>state</code> when necessary</strong>. So you can have your cake, and eat it too!</p>
<h2 id="get-outta-the-way"><a class="header-anchor" href="#get-outta-the-way" aria-hidden="true">#</a> Get outta’ the way!</h2>
<p>One of the things about routing tools is that they’re often at the core of your application. After all, the URL bar is at top of the browser. Your <code>history</code> object is probably one of the first things you instantiate. And your application can’t do <em>anything</em> if it doesn’t know what the user wants to see.</p>
<p>So you can see how this might go to the head of someone making a routing library. Not only do they get to control an important part of your project; by limiting how routing data can be accessed, their API can dictate <em>the structure of your entire application!</em> And as a number of react-router users have discovered, <strong>if the router API changes – your application will need to change too</strong>.</p>
<p>Junctions avoids these issues by being completely agnostic as to how you use your routing data. It gives you one single method to convert your URL into a tree of routes. And once the conversion is complete, you can use your routing data however you’d like!</p>
<ul>
<li>You can use it directly at the application root</li>
<li>You can pass it explicitly where it needs to go, via <code>props</code></li>
<li>You can create some Context-based helpers (like react-router)</li>
</ul>
<p>But the best part? The conversion of your entire URL into <code>Route</code> objects can take place <em>outside</em> of any React component tree. This means that <strong>Junctions will <em>never</em> get in the way of React.</strong> Or Vue. Or Angular. Or whatever framework you choose to use it with.</p>
<p>Now to be clear, this flexibility does come at a cost: out of the box, Junctions-based components are a tad more verbose than those written with competing routers. But to mitigate this, you get packages to integrate with frameworks, and docs which contain examples to follow. And even without these tools, <em>flexibility is less of a problem than you may think.</em> Because <strong>Junctions gives you back control</strong>. It lets you add your own sugar, so your routing is not too bland, not too sweet – but just perfect for you. Which sounds great and all, but <a href="/guide/introduction/what-you-get-from-junctions">how exactly does Junctions manage this?</a></p>
</markdown></div><div class="MenuWrapper-arrows" data-reactid="65"><a class="MenuWrapper-arrows-prev" href="/guide/introduction/motivation" data-reactid="66">Motivation</a><a class="MenuWrapper-arrows-next" href="/guide/introduction/what-you-get-from-junctions" data-reactid="67">What You Get From Junctions</a></div></div></div></div></div><div class="RootWrapper-footer" data-reactid="68"><!-- react-text: 69 -->Copyright © 2017 <!-- /react-text --><a href="http://www.jamesknelson.com" data-reactid="70">James K Nelson</a></div></div>
  </div>

  
    <script type="text/javascript" src="/vendor-69ac9439b09be6398a32.js"></script>
  
    <script type="text/javascript" src="/3.docs-introduction-three-principles-a710611352a345e45c83.js"></script>
  
    <script type="text/javascript" src="/entry-ac5d4f904bf29d4b6899.js"></script>
  
</body>
</html>
